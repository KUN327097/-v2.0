<!DOCTYPE html>
<html lang="zh-CN" class="h-full bg-slate-50">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>äº¤äº’å¼ç³»ç»Ÿæ¶æ„æµè§ˆå™¨ - GEM Workbench</title>
    <!-- Chosen Palette: Slate & Sky -->
    <!-- Application Structure Plan: A step-by-step interactive simulation is chosen to explain a complex process. The user controls the flow via 'Next'/'Previous' buttons, making it a self-paced learning tool. The layout features a central diagram with components (Frontend, Firebase Services) and a side panel for narrative explanations. This structure is optimal for educational content, as it pairs visual animation with textual context, reinforcing the relationship between system components at each stage of the user journey. -->
    <!-- Visualization & Content Choices: 
        - System Components -> Goal: Organize -> Viz: Styled HTML blocks with icons -> Interaction: Blocks are highlighted and animated based on the current step. -> Justification: Clear visual separation of concerns.
        - Data Flow -> Goal: Show Relationships/Change -> Viz: Animated 'data packet' divs using CSS transitions -> Interaction: The packets physically move from one component to another as the user progresses. -> Justification: This directly visualizes the data flow described in the architecture diagram, making the abstract concept of API calls and data writes tangible.
    -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; }
        .component-box {
            transition: all 0.5s ease-in-out;
            border: 2px solid transparent;
        }
        .component-box.highlight {
            border-color: #0ea5e9; /* sky-500 */
            transform: scale(1.03);
            box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
        }
        .data-packet {
            position: absolute;
            opacity: 0;
            transition: all 1.2s cubic-bezier(0.5, 0, 0.5, 1);
            transform-origin: center;
            z-index: 10;
        }
        .arrow {
            position: absolute;
            opacity: 0;
            transition: opacity 0.5s ease-in-out;
            z-index: 5;
        }
        .arrow-line {
            position: absolute;
            background-color: #64748b; /* slate-500 */
            transform-origin: left center;
        }
        .arrow-head {
            position: absolute;
            border-style: solid;
            border-color: transparent transparent transparent #64748b;
        }
    </style>
</head>
<body class="h-full antialiased text-slate-800">

    <div class="min-h-screen p-4 sm:p-6 lg:p-8 flex flex-col">
        <header class="w-full max-w-7xl mx-auto mb-6 text-center">
            <h1 class="text-2xl sm:text-3xl font-bold tracking-tight text-slate-900">GEMé¡¹ç›®æ¶æ„æµè§ˆå™¨</h1>
            <p class="text-sm text-slate-500 mt-1">ä¸€ä¸ªäº¤äº’å¼çš„æŒ‡å—ï¼Œç”¨äºç†è§£å‰ç«¯ã€æ•°æ®åº“å’Œåç«¯çš„å…³ç³»</p>
        </header>

        <main class="w-full max-w-7xl mx-auto flex-grow flex flex-col lg:flex-row gap-8">
            
            <!-- Left Panel: Explanation & Controls -->
            <div class="w-full lg:w-1/3 xl:w-1/4 bg-white p-6 rounded-2xl border border-slate-200 shadow-sm flex flex-col">
                <div class="flex-grow">
                    <h2 id="step-title" class="text-xl font-semibold text-sky-700 mb-2">æ¬¢è¿ï¼</h2>
                    <div id="step-description" class="text-sm text-slate-600 space-y-3">
                        <p>æœ¬æµè§ˆå™¨å°†é€šè¿‡æ¨¡æ‹Ÿä¸€æ¬¡å®Œæ•´çš„â€œåˆ›å»ºè¯„æµ‹ä»»åŠ¡â€æµç¨‹ï¼Œå¸¦æ‚¨äº†è§£æˆ‘ä»¬é¡¹ç›®ä¸­å„ä¸ªæŠ€æœ¯ç»„ä»¶æ˜¯å¦‚ä½•ååŒå·¥ä½œçš„ã€‚</p>
                        <p>è¯·ç‚¹å‡»â€œä¸‹ä¸€æ­¥â€å¼€å§‹æ‚¨çš„æ—…ç¨‹ã€‚</p>
                    </div>
                </div>
                <div class="mt-6 pt-6 border-t border-slate-200">
                    <div class="flex justify-between items-center">
                        <button id="prev-btn" onclick="changeStep(-1)" class="text-sm font-medium text-slate-500 hover:text-slate-800 disabled:opacity-50 disabled:cursor-not-allowed" disabled>&larr; ä¸Šä¸€æ­¥</button>
                        <span id="step-counter" class="text-xs text-slate-400">0 / 6</span>
                        <button id="next-btn" onclick="changeStep(1)" class="bg-sky-600 text-white font-medium px-5 py-2 rounded-lg shadow-sm hover:bg-sky-700 transition disabled:bg-slate-400">ä¸‹ä¸€æ­¥ &rarr;</button>
                    </div>
                </div>
            </div>

            <!-- Right Panel: Interactive Diagram -->
            <div id="diagram-container" class="w-full lg:w-2/3 xl:w-3/4 bg-white p-6 sm:p-8 rounded-2xl border border-slate-200 shadow-sm relative min-h-[60vh] lg:min-h-0">
                
                <!-- Components -->
                <div id="frontend" class="component-box absolute top-1/2 -translate-y-1/2 left-8 w-48 h-32 bg-slate-100 p-4 rounded-lg flex flex-col justify-center items-center">
                    <span class="text-3xl">ğŸ’»</span>
                    <p class="font-bold mt-2">å‰ç«¯ (ç”¨æˆ·ç•Œé¢)</p>
                    <p class="text-xs text-slate-500">HTML/CSS/JS</p>
                </div>

                <div class="absolute left-1/2 -translate-x-1/2 top-1/2 -translate-y-1/2 flex flex-col items-center gap-8">
                    <div id="auth" class="component-box w-48 h-24 bg-rose-50 p-3 rounded-lg flex flex-col justify-center items-center">
                        <span class="text-2xl">ğŸ”‘</span>
                        <p class="font-bold mt-1 text-center">ç”¨æˆ·è®¤è¯</p>
                        <p class="text-xs text-slate-500">Authentication</p>
                    </div>
                    <div id="firestore" class="component-box w-56 h-36 bg-amber-50 p-4 rounded-lg flex flex-col justify-center items-center">
                        <span class="text-3xl">ğŸ—ƒï¸</span>
                        <p class="font-bold mt-2 text-center">æ•°æ®åº“ (å­˜å‚¨)</p>
                        <p class="text-xs text-slate-500">Firestore</p>
                    </div>
                </div>
                
                <div id="functions" class="component-box absolute top-1/4 right-8 w-48 h-32 bg-indigo-50 p-4 rounded-lg flex flex-col justify-center items-center">
                    <span class="text-3xl">âš™ï¸</span>
                    <p class="font-bold mt-2">åç«¯é€»è¾‘</p>
                    <p class="text-xs text-slate-500">Cloud Functions</p>
                </div>

                <div id="llm-api" class="component-box absolute bottom-1/4 right-8 w-48 h-32 bg-teal-50 p-4 rounded-lg flex flex-col justify-center items-center">
                    <span class="text-3xl">ğŸ§ </span>
                    <p class="font-bold mt-2 text-center">å¤–éƒ¨AIæ¨¡å‹</p>
                    <p class="text-xs text-slate-500">LLM APIs</p>
                </div>

                <!-- Data Packets -->
                <div id="packet-uid" class="data-packet w-10 h-10 bg-rose-200 border-2 border-rose-500 rounded-full flex justify-center items-center text-xs font-bold">UID</div>
                <div id="packet-task" class="data-packet w-10 h-10 bg-amber-200 border-2 border-amber-500 rounded-lg flex justify-center items-center">ğŸ“</div>
                <div id="packet-trigger" class="data-packet w-10 h-10 bg-indigo-200 border-2 border-indigo-500 rounded-full flex justify-center items-center animate-pulse">âš¡</div>
                <div id="packet-query" class="data-packet w-10 h-10 bg-teal-200 border-2 border-teal-500 rounded-lg flex justify-center items-center">â“</div>
                <div id="packet-result" class="data-packet w-10 h-10 bg-indigo-200 border-2 border-indigo-500 rounded-lg flex justify-center items-center">ğŸ“Š</div>
                <div id="packet-update" class="data-packet w-10 h-10 bg-sky-200 border-2 border-sky-500 rounded-full flex justify-center items-center text-sm">ğŸ”„</div>
                
            </div>
        </main>
    </div>

<script>
const STEPS = [
    {
        title: "æ¬¢è¿ï¼",
        description: "<p>æœ¬æµè§ˆå™¨å°†é€šè¿‡æ¨¡æ‹Ÿä¸€æ¬¡å®Œæ•´çš„â€œåˆ›å»ºè¯„æµ‹ä»»åŠ¡â€æµç¨‹ï¼Œå¸¦æ‚¨äº†è§£æˆ‘ä»¬é¡¹ç›®ä¸­å„ä¸ªæŠ€æœ¯ç»„ä»¶æ˜¯å¦‚ä½•ååŒå·¥ä½œçš„ã€‚</p><p>è¯·ç‚¹å‡»â€œä¸‹ä¸€æ­¥â€å¼€å§‹æ‚¨çš„æ—…ç¨‹ã€‚</p>",
        action: (elements) => {}
    },
    {
        title: "ç¬¬ä¸€æ­¥: ç”¨æˆ·è®¤è¯",
        description: "<p>å½“ç”¨æˆ·è®¿é—®æˆ‘ä»¬çš„åº”ç”¨æ—¶ï¼Œå‰ç«¯ä¼šåšçš„ç¬¬ä¸€ä»¶äº‹å°±æ˜¯å‘ <strong>Firebase Authentication</strong> è¯·æ±‚ä¸€ä¸ªåŒ¿åçš„ç”¨æˆ·èº«ä»½ã€‚</p><p>æˆåŠŸåï¼ŒAuthenticationæœåŠ¡ä¼šè¿”å›ä¸€ä¸ªç‹¬ä¸€æ— äºŒçš„ç”¨æˆ·ID (UID)ï¼Œè¿™ä¸ªUIDå°±åƒæ˜¯ç”¨æˆ·åœ¨æœ¬æ¬¡ä¼šè¯ä¸­çš„â€œèº«ä»½è¯â€ï¼Œç”¨äºåç»­æ‰€æœ‰æ“ä½œã€‚</p>",
        action: (elements) => {
            elements.frontend.classList.add('highlight');
            elements.auth.classList.add('highlight');
            
            const from = elements.auth;
            const to = elements.frontend;
            const packet = elements.packets.uid;

            packet.style.top = `${from.offsetTop + from.offsetHeight / 2 - packet.offsetHeight / 2}px`;
            packet.style.left = `${from.offsetLeft + from.offsetWidth / 2 - packet.offsetWidth / 2}px`;
            packet.style.opacity = '1';
            
            setTimeout(() => {
                packet.style.top = `${to.offsetTop + to.offsetHeight / 2 - packet.offsetHeight / 2}px`;
                packet.style.left = `${to.offsetLeft + to.offsetWidth - packet.offsetWidth / 2}px`;
            }, 100);
        }
    },
    {
        title: "ç¬¬äºŒæ­¥: åˆ›å»ºè¯„æµ‹ä»»åŠ¡",
        description: "<p>ç”¨æˆ·åœ¨å‰ç«¯ç•Œé¢ä¸Šé€‰æ‹©å¥½è¦è¯„æµ‹çš„æ¨¡å‹ï¼Œç„¶åç‚¹å‡»â€œå¼€å§‹è¯„æµ‹â€æŒ‰é’®ã€‚</p><p>å‰ç«¯ä¼šå°†è¿™æ¬¡ä»»åŠ¡çš„æ‰€æœ‰ä¿¡æ¯ï¼ˆæ¯”å¦‚é€‰äº†å“ªäº›æ¨¡å‹ã€çŠ¶æ€æ˜¯ä»€ä¹ˆç­‰ï¼‰æ‰“åŒ…æˆä¸€ä¸ªæ•°æ®å¯¹è±¡ï¼Œç„¶åé€šè¿‡SDKå°†å®ƒå†™å…¥åˆ°æˆ‘ä»¬çš„æ ¸å¿ƒæ•°æ®åº“ <strong>Firestore</strong> ä¸­ã€‚è¿™ç›¸å½“äºåˆ›å»ºäº†ä¸€å¼ æ–°çš„â€œä»»åŠ¡å•â€ã€‚</p>",
        action: (elements) => {
            elements.frontend.classList.add('highlight');
            elements.firestore.classList.add('highlight');

            const from = elements.frontend;
            const to = elements.firestore;
            const packet = elements.packets.task;
            
            packet.style.top = `${from.offsetTop + from.offsetHeight / 2 - packet.offsetHeight / 2}px`;
            packet.style.left = `${from.offsetLeft + from.offsetWidth - packet.offsetWidth / 2}px`;
            packet.style.opacity = '1';

            setTimeout(() => {
                packet.style.top = `${to.offsetTop + to.offsetHeight / 2 - packet.offsetHeight / 2}px`;
                packet.style.left = `${to.offsetLeft - packet.offsetWidth / 2}px`;
            }, 100);
        }
    },
    {
        title: "ç¬¬ä¸‰æ­¥: è§¦å‘åç«¯é€»è¾‘",
        description: "<p>Firestoreéå¸¸å¼ºå¤§ï¼Œå®ƒå¯ä»¥è¢«é…ç½®ä¸ºï¼š<strong>å½“æœ‰æ–°æ•°æ®å†™å…¥æ—¶ï¼Œè‡ªåŠ¨è§¦å‘ä¸€ä¸ªåŠ¨ä½œ</strong>ã€‚</p><p>æˆ‘ä»¬æ­£æ˜¯åˆ©ç”¨äº†è¿™ä¸ªç‰¹æ€§ã€‚å½“ä¸Šä¸€æ­¥çš„â€œä»»åŠ¡å•â€è¢«åˆ›å»ºæ—¶ï¼ŒFirestoreä¼šè‡ªåŠ¨â€œé€šçŸ¥â€æˆ‘ä»¬çš„åç«¯é€»è¾‘ <strong>Cloud Function</strong>ï¼Œå¹¶æŠŠä»»åŠ¡æ•°æ®ä¼ é€’ç»™å®ƒã€‚è¿™ä¸ªè¿‡ç¨‹æ˜¯å…¨è‡ªåŠ¨çš„ï¼Œæ— éœ€å‰ç«¯å¹²é¢„ã€‚</p>",
        action: (elements) => {
            elements.firestore.classList.add('highlight');
            elements.functions.classList.add('highlight');

            const from = elements.firestore;
            const to = elements.functions;
            const packet = elements.packets.trigger;

            packet.style.top = `${from.offsetTop - from.offsetHeight / 4 - packet.offsetHeight / 2}px`;
            packet.style.left = `${from.offsetLeft + from.offsetWidth - packet.offsetWidth / 2}px`;
            packet.style.opacity = '1';

            setTimeout(() => {
                packet.style.top = `${to.offsetTop + to.offsetHeight / 2 - packet.offsetHeight / 2}px`;
                packet.style.left = `${to.offsetLeft - packet.offsetWidth / 2}px`;
            }, 100);
        }
    },
    {
        title: "ç¬¬å››æ­¥: åç«¯æ‰§è¡Œè¯„æµ‹",
        description: "<p><strong>Cloud Function</strong> æ˜¯æˆ‘ä»¬çœŸæ­£çš„â€œåå°å¤§è„‘â€ã€‚å®ƒæ¥æ”¶åˆ°ä»»åŠ¡åï¼Œä¼šå¼€å§‹æ‰§è¡Œæœ€æ ¸å¿ƒçš„å·¥ä½œï¼š</p><p>1. éå†ä»»åŠ¡ä¸­çš„æ‰€æœ‰é—®é¢˜ã€‚</p><p>2. æ‹¿ç€è¿™äº›é—®é¢˜å»è¯·æ±‚<strong>å¤–éƒ¨çš„AIæ¨¡å‹API</strong>ï¼Œè·å–å›ç­”ã€‚</p><p>3. (å¯é€‰) è¯·æ±‚â€œAIè£åˆ¤â€æ¨¡å‹è¿›è¡Œæ‰“åˆ†ã€‚è¿™ä¸ªè¿‡ç¨‹å¯èƒ½éœ€è¦å‡ åˆ†é’Ÿï¼Œä½†å®Œå…¨åœ¨äº‘ç«¯è¿›è¡Œï¼Œç”¨æˆ·å¯ä»¥å…³é—­æµè§ˆå™¨ã€‚</p>",
        action: (elements) => {
            elements.functions.classList.add('highlight');
            elements.llmApi.classList.add('highlight');
            
            const from = elements.functions;
            const to = elements.llmApi;
            const packet = elements.packets.query;

            packet.style.top = `${from.offsetTop + from.offsetHeight - packet.offsetHeight / 2}px`;
            packet.style.left = `${from.offsetLeft + from.offsetWidth / 2 - packet.offsetWidth / 2}px`;
            packet.style.opacity = '1';

            setTimeout(() => {
                packet.style.top = `${to.offsetTop - packet.offsetHeight / 2}px`;
                packet.style.left = `${to.offsetLeft + to.offsetWidth / 2 - packet.offsetWidth / 2}px`;
                packet.style.transition = 'all 1.2s cubic-bezier(0.5, 0, 0.5, 1), transform 0.5s ease 1.2s';
                packet.style.transform = 'rotate(360deg)';
            }, 100);
        }
    },
    {
        title: "ç¬¬äº”æ­¥: ç»“æœå†™å›æ•°æ®åº“",
        description: "<p>å½“Cloud Functionä»AIæ¨¡å‹é‚£é‡Œæ‹¿åˆ°äº†æ‰€æœ‰çš„å›ç­”å’Œè¯„åˆ†åï¼Œå®ƒä¼šæŠŠè¿™äº›å®è´µçš„ç»“æœæ•°æ®ï¼Œå†å†™å›åˆ° <strong>Firestore</strong> ä¸­é‚£å¼ åŸå§‹çš„â€œä»»åŠ¡å•â€é‡Œï¼Œå¹¶æŠŠä»»åŠ¡çŠ¶æ€æ›´æ–°ä¸ºâ€œå·²å®Œæˆâ€ã€‚</p><p>è‡³æ­¤ï¼Œä¸€æ¬¡è¯„æµ‹çš„æ ¸å¿ƒæµç¨‹åœ¨åç«¯å°±å·²ç»å…¨éƒ¨å®Œæˆäº†ã€‚</p>",
        action: (elements) => {
            elements.functions.classList.add('highlight');
            elements.firestore.classList.add('highlight');
            
            const from = elements.functions;
            const to = elements.firestore;
            const packet = elements.packets.result;

            packet.style.top = `${from.offsetTop + from.offsetHeight / 2 - packet.offsetHeight / 2}px`;
            packet.style.left = `${from.offsetLeft - packet.offsetWidth / 2}px`;
            packet.style.opacity = '1';

            setTimeout(() => {
                packet.style.top = `${to.offsetTop - to.offsetHeight/4 - packet.offsetHeight / 2}px`;
                packet.style.left = `${to.offsetLeft + to.offsetWidth - packet.offsetWidth/2}px`;
            }, 100);
        }
    },
    {
        title: "ç¬¬å…­æ­¥: å®æ—¶æ›´æ–°å‰ç«¯",
        description: "<p>æœ€ç¥å¥‡çš„ä¸€æ­¥æ¥äº†ï¼å‰ç«¯ä»ä¸€å¼€å§‹å°±æ­£åœ¨â€œç›‘å¬â€ç€Firestoreé‡Œä»»åŠ¡å•çš„å˜åŒ–ã€‚</p><p>å½“åç«¯Cloud Functionå°†ä»»åŠ¡çŠ¶æ€æ›´æ–°ä¸ºâ€œå·²å®Œæˆâ€æ—¶ï¼ŒFirestoreä¼š**ç«‹å³ã€è‡ªåŠ¨åœ°å°†è¿™ä¸ªæ›´æ–°æ¨é€ç»™å‰ç«¯**ã€‚å‰ç«¯æ”¶åˆ°é€šçŸ¥åï¼Œä¼šè‡ªåŠ¨åˆ·æ–°ç•Œé¢ï¼Œæ¯”å¦‚æŠŠâ€œå¤„ç†ä¸­â€çš„æ ‡ç­¾å˜æˆâ€œå·²å®Œæˆâ€ï¼Œå¹¶ç‚¹äº®â€œæŸ¥çœ‹æŠ¥å‘Šâ€æŒ‰é’®ã€‚æ•´ä¸ªè¿‡ç¨‹æ˜¯å®æ—¶çš„ï¼Œç”¨æˆ·æ— éœ€æ‰‹åŠ¨åˆ·æ–°é¡µé¢ã€‚</p>",
        action: (elements) => {
            elements.firestore.classList.add('highlight');
            elements.frontend.classList.add('highlight');
            
            const from = elements.firestore;
            const to = elements.frontend;
            const packet = elements.packets.update;

            packet.style.top = `${from.offsetTop + from.offsetHeight/2 - packet.offsetHeight / 2}px`;
            packet.style.left = `${from.offsetLeft - packet.offsetWidth/2}px`;
            packet.style.opacity = '1';

            setTimeout(() => {
                packet.style.top = `${to.offsetTop + to.offsetHeight / 2 - packet.offsetHeight / 2}px`;
                packet.style.left = `${to.offsetLeft + to.offsetWidth - packet.offsetWidth / 2}px`;
            }, 100);
        }
    }
];

let currentState = {
    step: 0,
    elements: {
        frontend: document.getElementById('frontend'),
        auth: document.getElementById('auth'),
        firestore: document.getElementById('firestore'),
        functions: document.getElementById('functions'),
        llmApi: document.getElementById('llm-api'),
        packets: {
            uid: document.getElementById('packet-uid'),
            task: document.getElementById('packet-task'),
            trigger: document.getElementById('packet-trigger'),
            query: document.getElementById('packet-query'),
            result: document.getElementById('packet-result'),
            update: document.getElementById('packet-update'),
        },
        title: document.getElementById('step-title'),
        description: document.getElementById('step-description'),
        counter: document.getElementById('step-counter'),
        prevBtn: document.getElementById('prev-btn'),
        nextBtn: document.getElementById('next-btn'),
    }
};

function resetState() {
    Object.values(currentState.elements).forEach(el => {
        if (el && el.classList && el.classList.contains('component-box')) {
            el.classList.remove('highlight');
        }
    });
    Object.values(currentState.elements.packets).forEach(packet => {
        packet.style.opacity = '0';
        packet.style.transform = 'rotate(0deg)';
        packet.style.transition = 'all 1.2s cubic-bezier(0.5, 0, 0.5, 1)';
    });
}

function updateUI() {
    const stepData = STEPS[currentState.step];
    
    resetState();

    currentState.elements.title.innerHTML = stepData.title;
    currentState.elements.description.innerHTML = stepData.description;
    currentState.elements.counter.textContent = `${currentState.step} / ${STEPS.length - 1}`;
    
    currentState.elements.prevBtn.disabled = currentState.step === 0;
    currentState.elements.nextBtn.disabled = currentState.step === STEPS.length - 1;

    if (stepData.action) {
        stepData.action(currentState.elements);
    }
}

function changeStep(direction) {
    const newStep = currentState.step + direction;
    if (newStep >= 0 && newStep < STEPS.length) {
        currentState.step = newStep;
        updateUI();
    }
}

window.onload = updateUI;

</script>
</body>
</html>
